<div style="text-align: center;">
<%= form_with(model: client, local: true) do |form| %>
  <!-- error checking doesnt work with auto_fill -->
  <!--<% if client.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(client.errors.count, "error") %> prohibited this client from being saved:</h2>
      <ul>
        <% client.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>-->

  <div class="field">
    <%= form.label :first_name %>
    <%= form.text_field :first_name, id: :client_first_name %>
  </div>

  <div class="field">
    <%= form.label :last_name %>
    <%= form.text_field :last_name, id: :client_last_name%>
  </div>

  <div class="field">
    <%= form.label :dob %>
    <%= form.datetime_select :dob, id: :client_dob%>
  </div>

  <div class="field" style="display: inline-block;">
    <%= form.label :phone_number %>
    <%= form.text_field :phone_number, id: :client_phone_number%>
  </div>

  <div class="field" style="display: inline-block;">
    <%= form.label :leave_message %>
    <%= form.check_box :leave_message, id: :client_leave_message%>
  </div>

  <div class="field">
    <%= form.label :email %>
    <%= form.text_field :email, id: :client_email%>
  </div>

  <div class="field">
    <%= form.label :occupation %>
    <%= form.text_field :occupation, id: :client_occupation%>
  </div>

  <div class="field">
    <%= form.label :employer %>
    <%= form.text_field :employer, id: :client_employer%>
  </div>

  <div class="field">
    <%= form.label :employer_address %>
    <%= form.text_field :employer_address, id: :client_employer_address%>
  </div>

  <div class="field" style="display: inline-block;">
    <%= form.label :work_phone %>
    <%= form.text_field :work_phone, id: :client_work_phone%>
  </div>

  <div class="field" style="display: inline-block;">
    <%= form.label :leave_message_work %>
    <%= form.check_box :leave_message_work, id: :client_leave_message_work%>
  </div>

  <hr>

  <div class="field">
    <%= form.label :spouse_first_name %>
    <%= form.text_field :spouse_first_name, id: :client_spouse_first_name%>
  </div>

  <div class="field">
    <%= form.label :spouse_last_name %>
    <%= form.text_field :spouse_last_name, id: :client_spouse_last_name%>
  </div>

  <div class="field">
    <%= form.label :spouse_dob %>
    <%= form.datetime_select :spouse_dob, id: :client_spouse_dob%>
  </div>

  <div class="field">
    <%= form.label :spouse_occupation %>
    <%= form.text_field :spouse_occupation, id: :client_spouse_occupation%>
  </div>

  <div class="field">
    <%= form.label :spouse_employer %>
    <%= form.text_field :spouse_employer, id: :client_spouse_employer%>
  </div>

  <div class="field">
    <%= form.label :spouse_phone %>
    <%= form.text_field :spouse_phone, id: :client_spouse_phone%>
  </div>

  <hr>

  <div class="field">
    <%= form.label :emergency_name %>
    <%= form.text_field :emergency_name, id: :client_emergency_name%>
  </div>

  <div class="field">
    <%= form.label :emergency_relation %>
    <%= form.text_field :emergency_relation, id: :client_emergency_relation%>
  </div>

  <div class="field">
    <%= form.label :emergency_address %>
    <%= form.text_field :emergency_address, id: :client_emergency_address%>
  </div>

  <div class="field">
    <%= form.label :emergency_phone %>
    <%= form.text_field :emergency_phone, id: :client_emergency_phone%>
  </div>

  <div class="field">
    <%= form.label :health_insurance %>
    <%= form.check_box :health_insurance, id: :client_health_insurance%>
  </div>

  <div class="field">
    <%= form.label :insurance_company %>
    <%= form.text_field :insurance_company, id: :client_insurance_company%>
  </div>

  <hr>

  <div class="field">
    <%= form.label :physician %>
    <%= form.text_field :physician, id: :client_physician%>
  </div>

  <div class="field">
    <%= form.label :physician_phone %>
    <%= form.text_field :physician_phone, id: :client_physician_phone%>
  </div>

  <div class="field">
    <%= form.label :medication %>
    <%= form.text_field :medication, id: :client_medication%>
  </div>

  <div class="field">
    <%= form.label :counselor_seen_before %>
    <%= form.check_box :counselor_seen_before, id: :client_counselor_seen_before%>
  </div>

  <div class="field">
    <%= form.label :counselor_seen %>
    <%= form.text_field :counselor_seen, id: :client_counselor_seen%>
  </div>

  <div class="field">
    <%= form.label :help_reason %>
    <%= form.text_field :help_reason, id: :client_help_reason%>
  </div>

  <div onclick="Show()" style="border: 1px solid black">
    <p id="titleCounseling">Informed Consent for Counseling</p>
  </div>

  <div onclick="Show()" style="border: 1px solid black">
    <p id="titleTreatment">Informed Consent for Treatment</p>
  </div>

  <div onclick="Show()" style="border: 1px solid black">
    <p id="titleRecording">Informed Consent for Video/Audio Recording</p>
    <p id="recording" style="display: none;">As a graduate student, I am required to be under the direct supervision of qualified clinical supervisors.
      My supervisors review all aspects of the services that I am providing to you. You have the right to know the name of my supervisor(s) and how to contact her or him.
      This information is listed above. In addition, as part of my program and clinical superivison requirements, I electronically record my counseling sessions.
      These recordings are reviewed during clinical supervision for the purposes of facilitating my learning and effectiveness as a developing counselor.
      Recordings are kept secure and confidential, and they are never shared with any person who is not part of hte OSU Counseling program. Recordings are erased after the clinical requiremnets have been met.
      Your signature (as the client/and parent or guardian) below confirms that this form has been explained to you, and that you understand the following:
      I am not required and I am under no obligation to have counseling sessions recorded.
      I may withdraw my permission at any time during or after the recording session. My care will not change by my decision not to be recorded.
      I have the right to review my recording(s) with my student counselor during a counseling session.
      My student counselor receives superivison both at this location and by the faculty at Oregon State University Cascades.
      The contents of this recording will remain confidential within the supervision at OSU Cascades.
      Recordings are erased after the clinical requirements have been met.
      I may revoke this consent at any time by submitting to the student counselor a request to withdraw my (as a client, parent/guardian) permission.
      The original copy of this consent form will be kpet in my records wit this agency.
      This recording will only be used as a tool to help my student counselor in assissting me or my family.</p>
  </div>

  <h3>By signing below you agree to the selected consent forms</h3>
  <ul>
    <ol>
      <label>Audio/Video Consent</label><input id="checkBox" type="checkbox" checked>
    </ol>
    <ol>
      <label>Counseling Consent</label><input id="checkBox" type="checkbox" checked>
    </ol>
    <ol>
      <label>Treatment Consent</label><input id="checkBox" type="checkbox" checked>
    </ol>
  </ul>

  <canvas style="border: 1px solid black" id="signature-pad" class="signature-pad" width=800 height=300></canvas>


<br><%= check_box_tag :autofill, true, (@auto_fill == 'true') %> autofill

  <div class="actions">
    <%= form.submit "Submit" %>
  </div>

<% end %>
</div>



<script src="https://cdn.jsdelivr.net/npm/signature_pad@2.3.2/dist/signature_pad.min.js"></script>
<script>
  function Show() {
      var x = document.getElementById("recording");
      var y = document.getElementById("titleRecording");
      if (x.style.display === "none") {
          x.style.display = "block";
          y.style.display = "none";
      } else {
          x.style.display = "none";
          y.style.display= "block";
      }
  }

  var signaturePad = new SignaturePad(document.getElementById('signature-pad'), {
  backgroundColor: 'rgba(255, 255, 255, 0)',
  penColor: 'rgb(0, 0, 0)'
});
</script>
